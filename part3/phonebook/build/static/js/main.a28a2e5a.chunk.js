(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{44:function(e,n,t){"use strict";t.r(n);var r=t(20),c=t.n(r),a=t(9),u=t(11),o=t(3),i=t(2),l=t(5),s=t.n(l),d="/api/persons",b={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},create:function(e){return s.a.post(d,e).then((function(e){return e.data}))},update:function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},remove:function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},j=t(0),m=function(e){var n=e.message;if(null===n)return null;return Object(j.jsx)("div",{style:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n})},f=function(e){var n=e.eventHandler;return Object(j.jsxs)("div",{children:["filter shown with ",Object(j.jsx)("input",{onChange:n})]})},h=function(e){var n=e.formEventHandler,t=e.nameEventHandler,r=e.numberEventHandler,c=e.nameValue,a=e.numberValue;return Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:c,onChange:t})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:a,onChange:r})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},p=function(e){var n=e.persons,t=e.deletePersonHandler;return Object(j.jsx)(j.Fragment,{children:n.map((function(e){return Object(j.jsxs)("div",{children:[e.name," ",e.number,Object(j.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.name)}))})},O=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(i.useState)(""),l=Object(o.a)(c,2),s=l[0],d=l[1],O=Object(i.useState)(""),v=Object(o.a)(O,2),x=v[0],g=v[1],w=Object(i.useState)(""),H=Object(o.a)(w,2),y=H[0],k=H[1],E=Object(i.useState)(null),S=Object(o.a)(E,2),C=S[0],A=S[1];Object(i.useEffect)((function(){b.getAll().then((function(e){return r(e)}))}),[]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(m,{message:C}),Object(j.jsx)(f,{eventHandler:function(e){return k(e.target.value)}}),Object(j.jsx)("h3",{children:"add a new"}),Object(j.jsx)(h,{formEventHandler:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(s)&&window.confirm("".concat(s," already exists in phonebook. Replace the existing phone number?"))){var n=t.filter((function(e){return e.name===s}))[0],c=Object(u.a)(Object(u.a)({},n),{},{number:x});b.update(n.id,c).then((function(e){var n=t.map((function(n){return n.id!==e.id?n:e}));r(n),d(""),g(""),A("Updated person ".concat(c.name," with new number: ").concat(c.number)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){r(Object(a.a)(t.filter((function(e){return e.name!==n.name})))),A("Information of ".concat(n.name," has already been removed from server.")),setTimeout((function(){A(null)}),5e3)}))}else{var o=Math.max.apply(Math,Object(a.a)(t.map((function(e){return e.id}))))+1,i={name:s,number:x,id:o};b.create(i).then((function(e){r(t.concat(i)),d(""),g(""),A("Added person ".concat(i.name," with number: ").concat(i.number)),setTimeout((function(){A(null)}),5e3)}))}},nameEventHandler:function(e){return d(e.target.value)},numberEventHandler:function(e){return g(e.target.value)},nameValue:s,numberValue:x}),Object(j.jsx)("h3",{children:"Numbers"}),Object(j.jsx)(p,{persons:t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())})),deletePersonHandler:function(e){window.confirm("Are you sure?")?b.remove(e).then((function(n){var c=Object(a.a)(t).filter((function(n){return n.id!==e}));r(c),console.log("Deleted person with ID ".concat(e," from database."))})):(A("User cancelled deletion."),setTimeout((function(){A(null)}),5e3))}})]})};c.a.render(Object(j.jsx)(O,{}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.a28a2e5a.chunk.js.map